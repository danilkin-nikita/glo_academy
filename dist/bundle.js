(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var t,n,o,r,a,c,i,s,u,l,m,d,v;s=document.querySelector("#timer-hours"),u=document.querySelector("#timer-minutes"),l=document.querySelector("#timer-seconds"),m=setInterval((function(){return v()}),1e3),d=function(e){return e<10&&(e="0"+e),e},(v=function(){var e,t,n,o=(e=(new Date("07 January 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60),{timeRemaining:e,hours:Math.floor(e/60/60),minutes:n,seconds:t});s.textContent=d(o.hours),u.textContent=d(o.minutes),l.textContent=d(o.seconds),(0===o.timeRemaining||o.timeRemaining<0)&&(s.textContent="00",u.textContent="00",l.textContent="00",clearInterval(m))})(),function(){var e=document.querySelector("menu"),t=document.querySelector('a[href$="service-block"]'),n=function(){e.classList.toggle("active-menu")};document.addEventListener("click",(function(r){var a=r.target;e.classList.contains("active-menu")?!a.closest(".active-menu")||a.classList.contains("close-btn")?n():a.closest("ul>li>a")&&(r.preventDefault(),o(a),n()):a.closest(".menu")?n():a.closest('a[href$="service-block"]')&&(r.preventDefault(),o(t))}));var o=function(e){var t=e.getAttribute("href").substr(1);document.getElementById(t).scrollIntoView({behavior:"smooth",block:"start"})}}(),i=document.querySelector(".popup"),document.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-btn")&&(i.style.display="block",screen.width>768&&(i.style.opacity=0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=Date.now(),o=setInterval((function(){var r=Date.now()-n;e.style.opacity=r/t+"%",e.style.opacity>=1&&clearInterval(o)}))}(i))),t.closest(".popup")&&(t.classList.contains("popup-close")?i.style.display="none":(t=t.closest(".popup-content"))||(i.style.display="none"))})),r=document.querySelector(".service-header"),a=function(t){if(Array.isArray(t))return e(t)}(o=r.querySelectorAll(".service-header-tab"))||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(o)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=document.querySelectorAll(".service-tab"),r.addEventListener("click",(function(e){var t=e.target;t=t.closest(".service-header-tab"),function(e){for(var t=0;t<c.length;t++)e===t?(a[t].classList.add("active"),c[t].classList.remove("d-none")):(a[t].classList.remove("active"),c[t].classList.add("d-none"))}(a.indexOf(t))})),function(){for(var e,t=document.querySelectorAll(".portfolio-item"),n=document.querySelector(".portfolio-dots"),o=document.querySelector(".portfolio-content"),r=0,a=0;a<t.length;a++){var c=document.createElement("li");c.className="dot",n.append(c)}var i=document.querySelectorAll(".dot");i[0].className="dot dot-active";var s=function(e,t,n){e[t].classList.remove(n)},u=function(e,t,n){e[t].classList.add(n)},l=function(){s(t,r,"portfolio-item-active"),s(i,r,"dot-active"),++r>=t.length&&(r=0),u(t,r,"portfolio-item-active"),u(i,r,"dot-active")},m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;e=setInterval(l,t)};o.addEventListener("click",(function(e){e.preventDefault();var n=e.target;n.matches(".portfolio-btn, .dot")&&(s(t,r,"portfolio-item-active"),s(i,r,"dot-active"),n.matches("#arrow-right")?r++:n.matches("#arrow-left")?r--:n.matches(".dot")&&i.forEach((function(e,t){e===n&&(r=t)})),r>=t.length?r=0:r<0&&(r=t.length-1),u(t,r,"portfolio-item-active"),u(i,r,"dot-active"))})),o.addEventListener("mouseover",(function(t){(t.target.matches(".portfolio-btn")||t.target.matches(".dot"))&&clearInterval(e)})),o.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&m()})),m()}(),(n=document.querySelector(".command")).addEventListener("mouseover",(function(e){var n=e.target;n.closest(".command__photo")&&(t=n.src,n.src=n.dataset.img)})),n.addEventListener("mouseout",(function(e){var n=e.target;n.closest(".command__photo")&&(n.src=t)})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),a=document.querySelector(".calc-count"),c=document.getElementById("total"),i=function(){var t=0,i=1,u=1,l=n.options[n.selectedIndex].value,m=+o.value;a.value>1&&(i+=(a.value-1)/10),r.value&&r.value<5?u*=2:r.value&&r.value<10&&(u*=1.5),l&&m&&(t=e*l*m*i*u),s(t,c)},s=function(e,t){var n=10,o=0;e>1e4&&e<=3e4?n=5:e>3e4&&e<=1e5?n=2:e>1e5&&(n=1),setInterval((function(){o<e&&(o+=100)}),n),requestAnimationFrame((function e(){requestAnimationFrame(e),t.textContent=o}))};t.addEventListener("change",(function(e){var t=e.target;t!==n&&t!==o&&t!==r&&t!==a||i()})),t.addEventListener("input",(function(e){var t=e.target;t!==o&&t!==r&&t!==a||(t.value=t.value.replace(/\D/g,""))}))}(),function(){var e=document.createElement("div");e.style.cssText="font-size: 2rem;",e.style.color="#fff";var t=function(e){e.style.border="3px solid red",setTimeout((function(){e.style.border="none"}),1500)};document.addEventListener("submit",(function(o){o.preventDefault();var r=o.target,a=r.querySelector('input[name="user_name"]'),c=r.querySelector('input[name="user_message"]'),i=r.querySelector('input[name="user_phone"]'),s=r.querySelector('input[name="user_email"]'),u=!0;if(r.matches("form")){if(a.value.match(/^[а-яА-Я]{2,}$/)||(t(a),u=!1),c&&(c.value.match(/(^$)|^[?\!,.\-\а-яА-Я\d\s]+$/)||(t(c),u=!1)),i.value.match(/^\+?[78]([-() ]*\d){10}$|^([-() ]*\d){7}$/)||(t(i),u=!1),s.value.match(/^\w+@\w+\.\w{2,}$/)||(t(s),u=!1),!1===u)return;r.appendChild(e),e.innerHTML='<img src="./images/loading.svg">';var l=new FormData(r);r.querySelectorAll("input").forEach((function(e){e.style.border="none"})),r.reset(),n(l).then((function(t){if(200!==t.status)throw new Error("status network not 200");e.textContent="Спасибо! Мы скоро с вами свяжемся!",setTimeout((function(){e.remove(),document.querySelector(".popup").style.display="none"}),3e3)})).catch((function(t){e.textContent="Что-то пошло не так...",console.error(t),setTimeout((function(){e.remove(),document.querySelector(".popup").style.display="none"}),3e3)}))}}));var n=function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"multipart/aplication/json"},body:JSON.stringify(Object.fromEntries(e))})};document.addEventListener("change",(function(e){var t=e.target;t.matches('input[name="user_name"]')&&(t.value.match(/^[а-яА-Я ]{2,}$/)?t.style.border="3px solid green":t.style.border="none"),t.matches('input[name="user_phone"]')&&(t.value.match(/^\+?[78]([-() ]*\d){10}$|^([-() ]*\d){7}$/)?t.style.border="3px solid green":t.style.border="none"),t.matches('input[name="user_email"]')&&(t.value.match(/^[a-z0-9.-_]+@[a-z]+\.[a-z]{2,}$/)?t.style.border="3px solid green":t.style.border="none")})),document.addEventListener("input",(function(e){var t=e.target;t.matches('input[name="user_name"]')&&(t.value=t.value.replace(/[^а-яА-Я ]$/,"")),t.matches('input[name="user_message"]')&&(t.value=t.value.replace(/[^а-яА-Я0-9\@\-\.!?,_ ]$/,"")),t.matches('input[name="user_phone"]')&&(t.value=t.value.replace(/[^+\-\)\(0-9 ]$/,"")),t.matches('input[name="user_email"]')&&(t.value=t.value.replace(/[^a-z0-9@.-_]$/,""))}))}()})();